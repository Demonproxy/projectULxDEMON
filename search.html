<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DEMON</title>
<script src="engine.js"></script>
<style>
button, input[type="button"], input[type="submit"] {
  background-color: black;
  color: red;
  border: 2px solid red;
  border-radius: 15px;
  font-size: 1.1em;
  font-family: 'Orbitron', sans-serif;
  box-shadow: 0 0 15px red;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;
}

button:hover {
  background-color: red;
  color: black;
  box-shadow: 0 0 25px red, 0 0 40px red;
  transform: scale(1.05);
}
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap');

  body {
    background-color: #000;
    color: #ff1a1a;
    font-family: 'Orbitron', sans-serif;
    margin: 20px;
    letter-spacing: 0.5px;
    overflow: hidden;
  }

  h1 {
    text-align: center;
    margin-bottom: 10px;
    text-shadow: 0 0 15px #ff0000;
    font-weight: 700;
  }

  #topBar {
    display: flex;
    flex-direction: column;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 25px rgba(255, 0, 0, 0.4);
    background: radial-gradient(circle at top, #1a0000 0%, #0a0000 100%);
    border: 1px solid #ff0000;
    width: 100%;
  }

  #tabs {
    display: flex;
    align-items: center;
    overflow-x: auto;
    background: linear-gradient(90deg, #160000, #1a0000);
    padding: 6px 10px;
    height: 48px;
    box-shadow: inset 0 -2px 6px rgba(255, 0, 0, 0.3);
  }

  .tab {
    display: flex;
    align-items: center;
    background-color: #220000;
    margin-right: 6px;
    padding: 6px 12px;
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
    transition: background-color 0.3s, box-shadow 0.3s;
    white-space: nowrap;
    position: relative;
    border: 1px solid #330000;
    color: #ff4d4d;
    text-shadow: 0 0 8px #ff0000;
  }

  .tab.active {
    background: linear-gradient(180deg, #660000, #1a0000);
    box-shadow: 0 0 15px #ff0000;
    color: #fff;
  }

  .tab:hover {
    background-color: #3b0000;
    box-shadow: 0 0 10px #ff0000;
  }

  .tab span {
    margin-right: 8px;
    font-size: 14px;
  }

  .close-btn {
    background: none;
    border: none;
    color: #ff6666;
    font-size: 14px;
    margin-left: 8px;
    cursor: pointer;
    padding: 0;
    transition: color 0.2s, transform 0.2s;
  }

  .close-btn:hover {
    color: #ff0000;
    transform: scale(1.2);
    text-shadow: 0 0 8px #ff0000;
  }

  #addTabBtn {
    font-size: 22px;
    font-weight: bold;
    padding: 4px 12px;
    border: none;
    border-radius: 6px;
    background: linear-gradient(145deg, #330000, #1a0000);
    color: #ff1a1a;
    cursor: pointer;
    margin-left: 6px;
    height: 38px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    transition: background 0.3s, transform 0.3s;
  }

  #addTabBtn:hover {
    background: #660000;
    transform: scale(1.1);
    box-shadow: 0 0 20px #ff0000;
  }

  #addressContainer {
    display: flex;
    padding: 10px;
    background: #0a0000;
    border-top: 1px solid #400000;
    border-bottom: 1px solid #400000;
  }

  #addressBar {
    flex: 1;
    padding: 10px 14px;
    font-size: 14px;
    border: none;
    border-radius: 6px;
    background-color: #1a0000;
    color: #ff4d4d;
    box-shadow: inset 0 0 10px rgba(255, 0, 0, 0.3);
  }

  #addressBar:focus {
    outline: none;
    background-color: #330000;
    box-shadow: 0 0 15px #ff0000;
  }

#content {
  flex: 1;
  height: calc(100vh - 180px); /* Adjust based on your topBar height */
  margin-top: 10px;
  border-radius: 0 0 10px 10px;
  overflow: hidden;
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.3);
  background: #0a0000;
  border: 1px solid #330000;
}


  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
</style>

</head>
<body>
<button onclick="window.open('https://sites.google.com/view/demonlinks/', '_blank')">DEMON browser</button>
<div id="topBar">
  <div id="tabs"></div>
  <div id="addressContainer">
    <input type="text" id="addressBar" placeholder="Enter URL and press Enter" onkeydown="if(event.key==='Enter'){navigateToAddress();}">
  </div>
</div>

<div id="content"></div>
<script src="s/uv/uv.bundle.js" defer></script>
<script src="s/uv/uv.config.js" defer></script>
<script src="s/register-sw.js" defer></script>
<script src="s/embed.js" defer></script>
<script>
  let tabs = [];
  let activeTabId = null;

  function createTab() {
    const id = Date.now() + Math.random();
    const tab = { id, title: 'New Tab', url: 'about:blank' };
    tabs.push(tab);
    renderTabs();
    setActiveTab(id);
  }

  function closeTab(id) {
    tabs = tabs.filter(t => t.id !== id);
    if (activeTabId === id) {
      if (tabs.length > 0) {
        setActiveTab(tabs[tabs.length -1].id);
      } else {
        document.getElementById('content').innerHTML = '';
        activeTabId = null;
        renderTabs();
      }
    } else {
      renderTabs();
    }
  }

  function setActiveTab(id) {
    activeTabId = id;
    const tab = tabs.find(t => t.id === id);
    if (tab) {
      loadContent(tab);
      document.getElementById('addressBar').value = tab.url === 'about:blank' ? '' : tab.url;
    }
    highlightActiveTab();
  }

  function highlightActiveTab() {
    document.querySelectorAll('.tab').forEach(t => {
      if (parseFloat(t.dataset.id) === activeTabId) {
        t.classList.add('active');
      } else {
        t.classList.remove('active');
      }
    });
  }

  function renderTabs() {
    const container = document.getElementById('tabs');
    container.innerHTML = '';

    tabs.forEach(t => {
      const tabEl = document.createElement('div');
      tabEl.className = 'tab';
      tabEl.dataset.id = t.id;
      if (t.id === activeTabId) tabEl.classList.add('active');

      const span = document.createElement('span');
      span.textContent = t.title;
      tabEl.appendChild(span);

      const closeBtn = document.createElement('button');
      closeBtn.innerHTML = 'Ã—';
      closeBtn.className = 'close-btn';
      closeBtn.onclick = (e) => { e.stopPropagation(); closeTab(t.id); };
      tabEl.appendChild(closeBtn);

      tabEl.onclick = () => setActiveTab(t.id);
      container.appendChild(tabEl);
    });

    const plusBtn = document.createElement('button');
    plusBtn.id = 'addTabBtn';
    plusBtn.innerHTML = '+';
    plusBtn.title = 'New Tab';
    plusBtn.onclick = createTab;
    container.appendChild(plusBtn);
  }

  function loadContent(tab) {
    const container = document.getElementById('content');
    container.innerHTML = '';

    setTimeout(() => {
      container.innerHTML = '';
      if (tab.url && tab.url !== 'about:blank') {
        const iframe = document.createElement('iframe');
        iframe.src = `/search.html#${tab.url}`;
        container.appendChild(iframe);
      }
    }, Math.random() * 1);
  }

  function navigateToAddress() {
    const input = document.getElementById('addressBar');
    let url = input.value.trim();
    if (!url) return;

    if (!url.startsWith('http://') && !url.startsWith('https://')) {
      if (url.includes('.')) {
        url = 'https://' + url;
      } else {
        url = searchEngine + 'https://duckduckgo.com/?q=';
      }
    }

    if (activeTabId === null && tabs.length === 0) {
      createTab();
    }
    const tab = tabs.find(t => t.id === activeTabId);
    if (tab) {
      tab.url = url;
      tab.title = (() => { try { return new URL(url).hostname; } catch { return 'Search'; } })();
      loadContent(tab);
      renderTabs();
    }
  }

  createTab();
</script>

</body>
</html>



